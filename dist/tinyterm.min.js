!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.TinyTerm=t()}}(function(){return function t(e,i,n){function o(r,a){if(!i[r]){if(!e[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(s)return s(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[r]={exports:{}};e[r][0].call(h.exports,function(t){var i=e[r][1][t];return o(i?i:t)},h,h.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e){function i(t){var e;this.commands={help:{fn:c.help,desc:"Display helpful information about builtin commands."}},this.indices={loader:0,cmdHistory:-1},this.loadInterval=null,this.cmdHistory=[],this.keysDown={},this.flashed=!1,this.commands.man=this.commands.help,this.aliases={man:!0},e=o.init(this,t),Object.keys(e).forEach(function(t){this[t]=e[t]}.bind(this))}var n=t("./animation"),o=t("./dom"),s=t("./history"),r=t("./run"),a=t("./shell"),c=t("./util");i.prototype.startLoading=n.startLoading,i.prototype.stopLoading=n.stopLoading,i.prototype.flash=s.flash,i.prototype.historyBack=s.back,i.prototype.historyFwd=s.fwd,i.prototype.focus=c.focus,i.prototype.help=c.help,i.prototype.print=c.print,i.prototype.autocomplete=a.autocomplete,i.prototype.process=a.process,i.prototype.register=a.register,i.prototype.run=r,e.exports=i},{"./animation":2,"./dom":3,"./history":4,"./run":5,"./shell":6,"./util":7}],2:[function(t,e){function i(t){t.input.value=s[t.indices.loader++],t.indices.loader=t.indices.loader%4}function n(){this.input.disabled=!0,this.loadInterval=window.setInterval(i.bind(null,this),120)}function o(t){this.loadInterval&&(window.clearInterval(this.loadInterval),this.loadInterval=null,this.input.value="",t||(this.input.disabled=!1))}var s=["/","-","\\","|"];e.exports={startLoading:n,stopLoading:o}},{}],3:[function(t,e){function i(){""===window.getSelection().toString()&&this.focus()}function n(){this.mirrorInner.textContent=this.input.value}function o(t){var e;t=t||window.event,e=t.keyCode,9===e?(t.preventDefault(),this.keysDown[9]||(this.autocomplete(this.input.value),this.keysDown[9]=!0)):13!==e||this.keysDown[16]||this.keysDown[18]?this.keysDown[e]||(this.keysDown[e]=!0,38===e?this.historyBack():40===e&&this.historyFwd(),this.flashed&&(this.flashed=!1)):r.call(this)}function s(t){var e;t=t||window.event,e=t.keyCode,this.keysDown[e]&&(this.keysDown[e]=!1)}function r(t){t=t||window.event,t&&t.preventDefault(),this.run()}function a(t,e){var a,c,d,h,l,u,f=document.createElement("div"),p=document.createElement("style"),m=document.createElement("div"),y=document.createElement("form"),v=document.createElement("div"),w=document.createElement("pre"),b=document.createElement("span"),g=document.createElement("textarea");return m.classList.add("tinyterm"),v.classList.add("expander"),f.textContent=">",f.className="tinytermFontProbe",g.name="prompt",g.autocomplete=g.autocorrect=g.autocapitalize="off",g.spellcheck=!1,w.appendChild(b),w.appendChild(document.createElement("br")),v.appendChild(w),v.appendChild(g),y.appendChild(v),m.appendChild(f),m.appendChild(y),("object"!=typeof e||"DIV"!==m.nodeName)&&(e=document.body),e.appendChild(m),a=window.getComputedStyle(f),c=a.getPropertyValue("font-size"),d=a.getPropertyValue("font-family"),h=a.getPropertyValue("color"),l=a.getPropertyValue("text-shadow"),f.style.fontSize="20em",u=f.offsetWidth/20,m.removeChild(f),document.head.appendChild(p),sheet=p.sheet,sheet.insertRule(".tinyterm code, .tinyterm pre, .tinyterm textarea {    font-size: "+c+";    font-family: "+d+";    color: "+h+";    text-shadow: "+l+"  }",0),sheet.insertRule(".tinyterm code, .tinyterm .expander {    margin-left: "+2*u+"px  }",0),sheet.insertRule(".tinyterm code {    text-indent: -"+2*u+"px  }",0),m.addEventListener("click",i.bind(t)),g.addEventListener("keydown",o.bind(t)),g.addEventListener("keyup",s.bind(t)),g.addEventListener("input",n.bind(t)),y.addEventListener("submit",r.bind(t)),{container:m,form:y,input:g,mirrorInner:b}}e.exports={init:a}},{}],4:[function(t,e){function i(){this.indices.cmdHistory=Math.min(this.indices.cmdHistory+1,this.cmdHistory.length-1),this.input.value=this.cmdHistory[this.indices.cmdHistory]||""}function n(){this.indices.cmdHistory=Math.max(this.indices.cmdHistory-1,-1),this.input.value=this.cmdHistory[this.indices.cmdHistory]||""}function o(t){this.container.classList.add("flash"),window.setTimeout(function(){this.container.classList.remove("flash")}.bind(this),84),t||(this.flashed=!0)}e.exports={back:i,fwd:n,flash:o}},{}],5:[function(t,e){e.exports=function(t){var e,i;e=this.form.prompt.value,this.form.reset(),this.mirrorInner.textContent="",this.startLoading(),this.print(">&nbsp;"+e),this.cmdHistory=[e].concat(this.cmdHistory).slice(0,60),this.indices.cmdHistory=-1,this.flashed&&(this.flashed=!1);try{i=this.process(e)}catch(n){throw i=n.toString(),n}finally{this.stopLoading(),this.print(i),"function"==typeof t&&t()}}},{}],6:[function(t,e){function i(t){function e(t,e){return e.filter(function(e){return!e.indexOf(t)})}var i,n,o,s=[];if(""===t)this.flash(!0);else switch(i=t.split(" "),1===i.length&&" "!==t.slice(-1)?s=e(t,Object.keys(this.commands)):(n=i[0],n&&(o=this.commands[n].args,o&&(s=e(i.slice(-1),o)))),s.length){case 0:this.flash(!0);break;case 1:this.input.value=i.slice(0,-1).concat(s).join(" ")+" ",this.flashed=!1;break;case 2:this.flashed?(this.print("> "+t),this.print(s.join(" "))):this.flash()}return s}function n(t){var e;return t=t.split(" "),e=t.splice(1).filter(function(t){return"-"!==t.charAt(0)}),t=t[0],this.commands[t]?this.commands[t].fn.apply(this,e):"Command not found: "+t}function o(t,e){var i,n,o,s;if("string"!=typeof t)throw"Must provide a name string to the TinyTerm constructor";if("object"!=typeof e)throw"Must provide a command object to the TinyTerm constructor";if(i=e.fn,n=e.desc,o=e.aliases,s=e.args,"function"!=typeof i)throw'command object requires a function "fn" in the TinyTerm constructor';if("string"!=typeof n)throw'command object requires a string "desc" in the TinyTerm constructor';this.commands[t]=e={fn:i,desc:n},s&&s.constructor===Array&&(this.commands[t].args=s),o&&o.constructor===Array&&o.forEach(function(t){this.commands[t]=e,this.aliases[t]=!0}.bind(this))}e.exports={autocomplete:i,process:n,register:o}},{}],7:[function(t,e){function i(t){return t=this.commands[t],t?t.desc:Object.keys(this.commands).filter(function(t){return!this.aliases[t]}.bind(this)).map(function(t){return t+": "+this.commands[t].desc}.bind(this))}function n(){this.input.focus()}function o(t,e){"string"!=typeof e&&(e="code"),t&&(t.constructor===Array?t.forEach(this.print.bind(this)):this.form.insertAdjacentHTML("beforebegin","<"+e+">"+t+"</"+e+">")),this.container.scrollTop=this.container.scrollHeight,this.focus()}e.exports={help:i,focus:n,print:o}},{}]},{},[1])(1)});